<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack | 1234567</title>
    <meta name="description" content="Blog">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.b48585ac.css" as="style"><link rel="preload" href="/assets/js/app.3915738f.js" as="script"><link rel="preload" href="/assets/js/5.40a6eba7.js" as="script"><link rel="preload" href="/assets/js/1.1da346cd.js" as="script"><link rel="preload" href="/assets/js/22.b50caa80.js" as="script"><link rel="prefetch" href="/assets/js/10.e286079c.js"><link rel="prefetch" href="/assets/js/11.30af2f12.js"><link rel="prefetch" href="/assets/js/12.48d97710.js"><link rel="prefetch" href="/assets/js/13.4a7b6120.js"><link rel="prefetch" href="/assets/js/14.e64bec92.js"><link rel="prefetch" href="/assets/js/15.a4d00c95.js"><link rel="prefetch" href="/assets/js/16.2cc8fe18.js"><link rel="prefetch" href="/assets/js/17.eed2d844.js"><link rel="prefetch" href="/assets/js/18.cb135ba4.js"><link rel="prefetch" href="/assets/js/19.23bd9406.js"><link rel="prefetch" href="/assets/js/20.f9b914f4.js"><link rel="prefetch" href="/assets/js/21.ae175dab.js"><link rel="prefetch" href="/assets/js/23.75471da3.js"><link rel="prefetch" href="/assets/js/24.41c5400d.js"><link rel="prefetch" href="/assets/js/25.25c9abe4.js"><link rel="prefetch" href="/assets/js/26.a989a703.js"><link rel="prefetch" href="/assets/js/3.dc5a5d96.js"><link rel="prefetch" href="/assets/js/4.803d5554.js"><link rel="prefetch" href="/assets/js/6.19e32962.js"><link rel="prefetch" href="/assets/js/7.ecd9138f.js"><link rel="prefetch" href="/assets/js/8.72d3fc16.js"><link rel="prefetch" href="/assets/js/9.bdc4e0f8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b48585ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">1234567</span></a> <div class="links"><div class="color-picker"><a href="#" class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/前端.html" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/category/Library.html" class="nav-link"><i class="iconfont undefined"></i>
  Library
</a></li><li class="dropdown-item"><!----> <a href="/category/Node.html" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont reco-account"></i>
  About
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="https://github.com/flynull" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/前端.html" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/category/Library.html" class="nav-link"><i class="iconfont undefined"></i>
  Library
</a></li><li class="dropdown-item"><!----> <a href="/category/Node.html" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont reco-account"></i>
  About
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="https://github.com/flynull" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/interestingLibrary/v2ray.html" class="sidebar-link">V2Ray</a></li><li><a href="/interestingLibrary/vuepress.html" class="sidebar-link">VuePress</a></li><li><a href="/interestingLibrary/webpack.html" class="active sidebar-link">Webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interestingLibrary/webpack.html#写在前面" class="sidebar-link">写在前面</a></li><li class="sidebar-sub-header"><a href="/interestingLibrary/webpack.html#另外提一下" class="sidebar-link">另外提一下</a></li><li class="sidebar-sub-header"><a href="/interestingLibrary/webpack.html#参考链接" class="sidebar-link">参考链接</a></li></ul></li><li><a href="/interestingLibrary/lodash.html" class="sidebar-link">Lodash</a></li><li><a href="/interestingLibrary/git.html" class="sidebar-link">Git</a></li></ul> </aside> <main class="page reco-hide"> <div class="page-title"><h1>Webpack</h1> <hr> <div data-v-42a3120b><i class="iconfont reco-account" data-v-42a3120b><span data-v-42a3120b>Ray</span></i> <i class="iconfont reco-date" data-v-42a3120b><span data-v-42a3120b>2019-1-15</span></i> <span id="/interestingLibrary/webpack.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-78a96807 data-v-42a3120b><i class="iconfont reco-eye" style="margin-right: .5rem" data-v-78a96807></i> <a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;" data-v-78a96807></a></span> <i class="iconfont reco-tag tags" data-v-42a3120b><span class="tag-item" data-v-42a3120b>
      webpack
    </span></i></div></div> <div class="content default"><blockquote><p>本质上，webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。</p></blockquote> <h2 id="写在前面"><a href="#写在前面" aria-hidden="true" class="header-anchor">#</a> 写在前面</h2> <p>那些安装、起步、基本概念在这里就不会再做赘述，官方的文档写的很清楚了。在这里只介绍Webpack4中一些比较常用的配置和功能。</p> <p>因为使用webpack打包的代码需要在多个环境部署，而不同的环境对构建出来的代码要求又不尽相同。比如生产环境要求构建出来的代码体积尽可能小，而开发环境则对错误的定位要求更高和允许代码的热重载，这就导致了不同环境需要不同打包配置，所以建议将不同的环境所需的配置代码分开，只将公共的配置放在一块的做法是值得提倡的；</p> <p>直接上代码吧。</p> <p>webpack.common.js:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//打包程序的入口，可以设置多个</span>
    entry<span class="token punctuation">:</span><span class="token punctuation">{</span>
        app<span class="token punctuation">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
        <span class="token comment">//指定的第三方库(library)，将其导到一个ckunk中</span>
        vendor<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">'lodash'</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token comment">//使用style-loader和css-loader加载css </span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'css-loader'</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">//使用file-loader加载图片 </span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.(png|svg|jpg|gif)$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token string">'file-loader'</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">//使用file-loader加载字体文件</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.(woff|woff2|eot|ttf|otf)$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token string">'file-loader'</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">//使用csv-loader加载数据文件</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.(csv|tsv)$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token string">'csv-loader'</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">//使用xml-loader加载xml文件</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.xml$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token string">'xml-loader'</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//打包程序的出口</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">//通过使用 output.filename 进行文件名替换，可以确保浏览器获取到修改后的文件。</span>
        filename<span class="token punctuation">:</span> <span class="token string">'[name].[chunkhash].js'</span><span class="token punctuation">,</span>
        <span class="token comment">//启用动态代码拆分时,这里使用了 chunkFilename，它决定非入口 chunk 的名称。</span>
        <span class="token comment">// chunkFilename: '[name].bundle.js',</span>
        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token comment">//使用CleanWebpackPlugin插件 在每次构建代码前清理输出的文件夹</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            cleanAfterEveryBuildPatterns<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//使用CleanWebpackPlugin插件 生成 html模板 并注入构建好的代码</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">'Caching'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//使用 ProvidePlugin 后，能够在通过 webpack 编译的每个模块中，通过访问一个变量来获取到 package 包</span>
        <span class="token comment">//以下配置告诉webpack：如果你遇到了至少一处用到 lodash 变量的模块实例，那请你将 lodash package 包引入进来，并将其提供给需要用到它的模块。</span>
        <span class="token comment">//看情况决定用不用</span>
        <span class="token comment">// new webpack.ProvidePlugin({</span>
            <span class="token comment">// _: 'lodash'</span>
            <span class="token comment">// 这样就能很好的与 tree shaking 配合，将 lodash 库中的其他没用到的部分去除。</span>
            <span class="token comment">// join: ['lodash', 'join']</span>
        <span class="token comment">// }),</span>
        <span class="token comment">//这主要用于长效缓存中，当引用发生变化时，不影响vendor的缓存</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 以下这是 webpack3 的做法，主要用于长效缓存</span>
        <span class="token comment">// CommonsChunkPlugin插件  将第三方库(library)（例如 lodash 或 react）提取到单独的 vendor chunk 文件中</span>
        <span class="token comment">// new webpack.optimize.CommonsChunkPlugin({  </span>
        <span class="token comment">//     name: 'vendor'   </span>
        <span class="token comment">// }),</span>

        <span class="token comment">// CommonsChunkPlugin插件 在每次修改后的构建结果中，将 webpack 的样板(boilerplate)和 manifest 提取出来。防止chunkhash变动，达到缓存目的</span>
        <span class="token comment">// new webpack.optimize.CommonsChunkPlugin({</span>
        <span class="token comment">//     name: 'manifest'</span>
        <span class="token comment">// }),</span>

        <span class="token comment">// CommonsChunkPlugin插件可以将公共的依赖模块提取到已有的入口 chunk 中，或者提取到一个新生成的 chunk。</span>
        <span class="token comment">// new webpack.optimize.CommonsChunkPlugin({</span>
        <span class="token comment">//     name: 'common' // 指定公共 bundle 的名称。</span>
        <span class="token comment">// })</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">//webpack4已经移除了原来的 webpack.optimize.CommonsChunkPlugin，</span>
    <span class="token comment">// 转而使用optimization.splitChunks.cacheGroups来配置，用的插件是SplitChunksPlugin</span>
    optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span> 
        splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
                    priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                commons<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    name<span class="token punctuation">:</span><span class="token string">'common'</span><span class="token punctuation">,</span><span class="token comment">// 指定公共 bundle 的名称。</span>
                    chunks<span class="token punctuation">:</span> <span class="token string">&quot;initial&quot;</span><span class="token punctuation">,</span>
                    minChunks<span class="token punctuation">:</span> <span class="token number">2</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>webpack.dev.js:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span><span class="token punctuation">{</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        filename<span class="token punctuation">:</span> <span class="token string">'[name].[hash].js'</span><span class="token punctuation">,</span>
        <span class="token comment">//publicPath 也会在服务器脚本用到，以确保文件资源能够被正确访问到</span>
        <span class="token comment">// publicPath: '/'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//开启后可以准确地知道错误来自于哪个源文件。</span>
    devtool<span class="token punctuation">:</span> <span class="token string">'inline-source-map'</span><span class="token punctuation">,</span>
    devServer<span class="token punctuation">:</span><span class="token punctuation">{</span>
        contentBase<span class="token punctuation">:</span><span class="token string">'./dist'</span><span class="token punctuation">,</span>
        <span class="token comment">// 启用devserver的热重载</span>
        hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token comment">// 添加了 内置的NamedModulesPlugin插件，以便更容易查看要修补(patch)的依赖</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        
        <span class="token comment">// 添加了 内置的HotModuleReplacementPlugin插件，添加热重载的功能</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    mode<span class="token punctuation">:</span><span class="token string">'development'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>webpack.prod.js:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">//避免在生产中使用 inline-*** 和 eval-***，因为它们可以增加 bundle 大小，并降低整体性能 </span>
    <span class="token comment">// devtool: 'source-map',</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string">'process.env.NODE_ENV'</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'production'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    mode<span class="token punctuation">:</span><span class="token string">'production'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="另外提一下"><a href="#另外提一下" aria-hidden="true" class="header-anchor">#</a> 另外提一下</h2> <ol><li>当你想看打包详细信息，往往会看到有些模块被隐藏看不了，这时可以使用 <code>--display-modules</code> 命令将隐藏的模块显示出来</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>Hash: faddbae5c142a11af0b8
Version: webpack 4.29.6
Time: 1439ms
Built at: 2019-04-17 17:37:16
                         Asset       Size  Chunks             Chunk Names
   app.d015c1457e0be4f2fbdc.js   1.83 KiB       1  [emitted]  app
common.c6107739f15f4b598fc9.js   69.4 KiB       0  [emitted]  common
                    index.html  350 bytes          [emitted]
vendor.484c23dbe5a52ef3941c.js   1.46 KiB       2  [emitted]  vendor
Entrypoint app = common.c6107739f15f4b598fc9.js app.d015c1457e0be4f2fbdc.js
Entrypoint vendor = common.c6107739f15f4b598fc9.js vendor.484c23dbe5a52ef3941c.js
[0] multi lodash 28 bytes {2} [built]
[YuTi] (webpack)/buildin/module.js 497 bytes {0} [built]
[tjUo] ./src/index.js + 1 modules 1.66 KiB {1} [built]
    | ./src/index.js 1.59 KiB [built]
    | ./src/print.js 69 bytes [built]
[yLpj] (webpack)/buildin/global.js 472 bytes {0} [built]
    + 1 hidden module
Child html-webpack-plugin for &quot;index.html&quot;:
     1 asset
    Entrypoint undefined = index.html
    [YuTi] (webpack)/buildin/module.js 497 bytes {0} [built]
    [yLpj] (webpack)/buildin/global.js 472 bytes {0} [built]
        + 2 hidden modules
</code></pre></div><ol start="2"><li>建议大家使用项目内的 webpack和webpack-cli,因为你本机的webpack版本可能与别的项目的webpack版本不一致，可能会导致一些构建上的问题。
当然如果是使用 <code>npm script</code> 调用webpack命令，则默认使用的项目内安装的webpack。下面是测试（我项目内的webpack装的webpack4，全局安装的是webpack3），直接使用webpack命令和使用<code>npm script</code>调用webpack命令使用webpack是有所不同的：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>$ npm run say

&gt; dev_env@1.0.0 say C:\Users\……\……\webpack\dev_env
&gt; webpack -v

4.29.6


$ webpack -v
3.10.0
</code></pre></div><h2 id="参考链接"><a href="#参考链接" aria-hidden="true" class="header-anchor">#</a> 参考链接</h2> <ol><li><a href="https://www.webpackjs.com/guides/" target="_blank" rel="noopener noreferrer">webpack中文-指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol></div> <!----> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12 天前</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/interestingLibrary/vuepress.html" class="prev">
          VuePress
        </a></span> <span class="next"><a href="/interestingLibrary/lodash.html">
          Lodash
        </a>
        →
      </span></p></div> </main> <div class="valine-wrapper" data-v-6835c30e><div id="valine" data-v-6835c30e></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-d0bfeaa4 data-v-d0bfeaa4><i class="iconfont reco-up" data-v-d0bfeaa4></i></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3915738f.js" defer></script><script src="/assets/js/5.40a6eba7.js" defer></script><script src="/assets/js/1.1da346cd.js" defer></script><script src="/assets/js/22.b50caa80.js" defer></script>
  </body>
</html>
